<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<title>Kelime Oyunu - Klavye Tasarƒ±m</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    primary: "#0EA5E9",
                    primaryDark: "#0284C7",
                },
                fontFamily: {
                    display: ["Nunito", "sans-serif"],
                },
            },
        },
    };
</script>
<style>
    body { 
        font-family: 'Nunito', sans-serif; 
        user-select: none; 
        -webkit-user-select: none; 
        overscroll-behavior: none; 
    }
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    
    @keyframes popIn {
        0% { transform: scale(0.5); opacity: 0; }
        70% { transform: scale(1.05); }
        100% { transform: scale(1); opacity: 1; }
    }
    .animate-pop { animation: popIn 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
    }
    .animate-shake { animation: shake 0.3s ease-in-out; }

    @keyframes bounce-subtle {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-3px); }
    }
    .animate-bounce-subtle { animation: bounce-subtle 2s ease-in-out infinite; }

    /* 3D Keyboard Key Style */
    .key {
        position: relative;
        width: 72px;
        height: 72px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.75rem;
        font-weight: 800;
        cursor: pointer;
        transition: all 0.1s ease;
        
        /* 3D Effect */
        background: linear-gradient(180deg, #ffffff 0%, #f1f5f9 100%);
        border: 1px solid #e2e8f0;
        box-shadow: 
            0 4px 0 #cbd5e1,
            0 6px 10px rgba(0,0,0,0.1);
        color: #334155;
    }

    .key:hover {
        transform: translateY(-2px);
        box-shadow: 
            0 6px 0 #cbd5e1,
            0 8px 15px rgba(0,0,0,0.15);
    }

    .key:active, .key.selected {
        transform: translateY(4px);
        box-shadow: 
            0 0px 0 #cbd5e1,
            0 2px 5px rgba(0,0,0,0.1);
    }

    .key.selected {
        background: linear-gradient(180deg, #0EA5E9 0%, #0284C7 100%);
        border-color: #0369A1;
        box-shadow: 
            0 4px 0 #075985,
            0 6px 15px rgba(14, 165, 233, 0.4);
        color: white;
        transform: translateY(0);
    }

    .key.selected:hover {
        transform: translateY(-2px);
        box-shadow: 
            0 6px 0 #075985,
            0 8px 20px rgba(14, 165, 233, 0.5);
    }

    /* Joker Key */
    .key-joker {
        width: 64px;
        height: 64px;
        background: linear-gradient(180deg, #fef3c7 0%, #fde68a 100%);
        border-color: #fbbf24;
        box-shadow: 
            0 4px 0 #d97706,
            0 6px 10px rgba(245, 158, 11, 0.2);
        color: #b45309;
        font-size: 1.5rem;
    }

    .key-joker:hover {
        box-shadow: 
            0 6px 0 #d97706,
            0 8px 15px rgba(245, 158, 11, 0.3);
    }

    .key-joker.selected {
        background: linear-gradient(180deg, #f59e0b 0%, #d97706 100%);
        border-color: #b45309;
        box-shadow: 
            0 4px 0 #92400e,
            0 6px 15px rgba(245, 158, 11, 0.5);
        color: white;
    }

    /* Action Keys */
    .key-action {
        width: 56px;
        height: 56px;
        font-size: 1.25rem;
        border-radius: 14px;
    }

    .key-action.shuffle {
        background: linear-gradient(180deg, #f0fdf4 0%, #dcfce7 100%);
        border-color: #86efac;
        box-shadow: 0 3px 0 #22c55e, 0 4px 8px rgba(34,197,94,0.15);
        color: #16a34a;
    }
    .key-action.shuffle:active {
        box-shadow: 0 0px 0 #22c55e;
        transform: translateY(3px);
    }

    .key-action.delete {
        background: linear-gradient(180deg, #fef2f2 0%, #fee2e2 100%);
        border-color: #fca5a5;
        box-shadow: 0 3px 0 #ef4444, 0 4px 8px rgba(239,68,68,0.15);
        color: #dc2626;
    }
    .key-action.delete:active {
        box-shadow: 0 0px 0 #ef4444;
        transform: translateY(3px);
    }

    .key-action.backspace {
        background: linear-gradient(180deg, #fff7ed 0%, #ffedd5 100%);
        border-color: #fdba74;
        box-shadow: 0 3px 0 #f97316, 0 4px 8px rgba(249,115,22,0.15);
        color: #ea580c;
    }
    .key-action.backspace:active {
        box-shadow: 0 0px 0 #f97316;
        transform: translateY(3px);
    }

    /* Keyboard Container */
    .keyboard {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }

    .keyboard-row {
        display: flex;
        gap: 10px;
    }

    /* Input Letter Box */
    .input-letter {
        transition: all 0.15s ease;
    }
    .input-letter:hover {
        transform: scale(1.1) rotate(-2deg);
        box-shadow: 0 8px 25px rgba(14, 165, 233, 0.4);
    }
</style>
</head>
<body class="bg-gradient-to-br from-slate-100 via-sky-50 to-cyan-50 min-h-screen flex items-center justify-center font-display overflow-hidden fixed w-full h-full">

<div class="w-full max-w-md h-full bg-white/90 backdrop-blur-xl sm:rounded-[32px] sm:shadow-2xl overflow-hidden relative flex flex-col border border-sky-100">
    
    <!-- Header -->
    <header class="pt-4 pb-2 px-5 flex justify-between items-center bg-white/95 backdrop-blur z-10 border-b border-sky-100">
        <div class="flex flex-col">
            <h1 class="text-xl font-black text-gray-800 leading-none tracking-tight">
                KELIME<span class="text-primary">USTASI</span>
            </h1>
            <span class="text-[10px] text-sky-500 font-semibold">V4 - Klavye Tasarƒ±m</span>
        </div>
        <div class="flex items-center gap-2">
            <div class="bg-sky-50 px-3 py-1.5 rounded-xl flex items-center space-x-1 border border-sky-200">
                <span class="material-symbols-outlined text-primary text-lg">timer</span>
                <span id="timer" class="text-lg font-bold text-primary tabular-nums">01:30</span>
            </div>
        </div>
    </header>

    <!-- Game Area -->
    <div class="flex-shrink-0 flex flex-col items-center justify-start pt-4 w-full relative z-20 bg-transparent">
        
        <!-- Top Bar: Actions + Joker -->
        <div class="w-full px-5 flex justify-between items-center mb-4">
            <!-- Left Actions -->
            <div class="flex gap-2">
                <button onclick="shuffleLetters()" class="key key-action shuffle" title="Karƒ±≈ütƒ±r">
                    <span class="material-symbols-outlined">shuffle</span>
                </button>
                <button onclick="clearGameInput()" class="key key-action delete" title="Temizle">
                    <span class="material-symbols-outlined">delete</span>
                </button>
            </div>
               
            </div>
            
            <!-- Right Actions -->
            <div class="flex gap-2">
                <button onclick="removeLastChar()" class="key key-action backspace" title="Geri Sil">
                    <span class="material-symbols-outlined">backspace</span>
                </button>
            </div>
        </div>

        <!-- Keyboard Layout: 8 Letters (3-3-2) -->
        <div class="keyboard mb-4">
            <!-- Row 1: 4 letters -->
            <div class="keyboard-row">
                <button id="key-0" onclick="handleLetterClick(0)" class="key">A</button>
                <button id="key-1" onclick="handleLetterClick(1)" class="key">B</button>
                <button id="key-2" onclick="handleLetterClick(2)" class="key">C</button>
                <button id="key-3" onclick="handleLetterClick(3)" class="key">D</button>
            </div>
            <!-- Row 2: 4 letters -->
            <div class="keyboard-row">
                <button id="key-4" onclick="handleLetterClick(4)" class="key">E</button>
                <button id="key-5" onclick="handleLetterClick(5)" class="key">F</button>
                <button id="key-6" onclick="handleLetterClick(6)" class="key">G</button>
                <button id="key-7" onclick="handleLetterClick(7)" class="key">H</button>
            </div>
            <!-- Row 3: 2 letters (centered) -->
            <div class="keyboard-row">
                 <button id="joker-btn" onclick="handleJokerClick()" class="key key-joker animate-bounce-subtle" title="Joker">
                    <span class="material-symbols-outlined text-2xl">star</span>
                </button>
            </div>
        </div>

        <!-- Input Area -->
        <div class="w-full px-4 mb-3">
            <div id="input-wrapper" class="relative w-full min-h-[60px] bg-gradient-to-b from-slate-50 to-slate-100 rounded-2xl border-2 border-slate-200 flex items-center justify-center overflow-hidden py-3 px-3 shadow-inner">
                <div id="input-container" class="flex items-center justify-center gap-2 flex-wrap">
                    <span class="text-sm text-slate-400 w-full text-center italic font-medium">Tu≈ülara bas...</span>
                </div>
            </div>
        </div>

        <!-- Submit Button -->
        <div class="w-full px-6 mb-4">
            <button onclick="submitWord()" class="w-full py-4 rounded-2xl font-bold text-white text-lg bg-gradient-to-r from-sky-500 to-cyan-500 shadow-lg shadow-sky-500/30 hover:from-sky-600 hover:to-cyan-600 active:scale-[0.98] flex items-center justify-center gap-2 transition-all border-b-4 border-sky-600 active:border-b-0 active:mt-1">
                <span>KAYDET</span>
                <span class="material-symbols-outlined text-2xl">keyboard_return</span>
            </button>
        </div>
    </div>

    <!-- Found Words -->
    <div class="flex-1 w-full bg-white/60 backdrop-blur border-t border-slate-200 overflow-hidden flex flex-col">
        <div class="px-6 py-3 flex items-center justify-between sticky top-0 bg-white/80 backdrop-blur z-10 border-b border-slate-100">
            <h2 class="text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2">
                <span class="material-symbols-outlined text-sm text-primary">format_list_bulleted</span>
                Bulunan Kelimeler
            </h2>
            <span id="word-count-badge" class="bg-primary/10 text-primary text-xs font-bold px-3 py-1 rounded-full border border-primary/20">0</span>
        </div>
        <div id="found-words-list" class="flex-1 overflow-y-auto px-6 content-start flex flex-wrap gap-2 pb-20 scrollbar-hide">
            <div class="w-full text-center mt-8 opacity-50">
                <span class="material-symbols-outlined text-5xl text-slate-300">keyboard</span>
                <p class="text-xs text-slate-400 mt-2 font-medium">Hen√ºz kelime bulunamadƒ±</p>
            </div>
        </div>
    </div>

    <!-- Joker Modal -->
    <div id="joker-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-md p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-[340px] overflow-hidden flex flex-col border border-amber-100">
            <div class="p-5 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-amber-50 to-yellow-50">
                <div>
                    <h3 class="text-lg font-extrabold text-gray-800 flex items-center gap-2">
                        <span class="material-symbols-outlined text-amber-500">star</span>
                        Joker Harf
                    </h3>
                    <p class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Bir harf se√ß</p>
                </div>
                <button onclick="closeJokerModal()" class="w-9 h-9 rounded-xl bg-gray-100 flex items-center justify-center text-gray-500 hover:text-red-500 hover:bg-red-50 transition-colors">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-4 bg-white">
                <div id="alphabet-grid" class="grid grid-cols-7 gap-2"></div>
            </div>
        </div>
    </div>
</div>

<script>
    // === CONFIG ===
    const GAME_DURATION = 90; 
    const LETTER_COUNT = 8;
    const VOWELS = "AEIƒ∞O√ñU√ú";
    const CONSONANTS = "BC√áDFGƒûHJKLMNPRS≈ûTVYZ";
    const FULL_ALPHABET = "ABC√áDEFGƒûHIƒ∞JKLMNO√ñPRS≈ûTU√úVYZ";
    
    // === STATE ===
    let timerInterval;
    let timeRemaining = GAME_DURATION;
    let letters = []; // 8 harf
    let jokerState = { used: false, char: null };
    let currentInputSequence = []; 
    let foundWords = [];

    // === DOM ===
    const timerEl = document.getElementById('timer');
    const inputContainerEl = document.getElementById('input-container');
    const inputWrapperEl = document.getElementById('input-wrapper');
    const foundListEl = document.getElementById('found-words-list');
    const countBadgeEl = document.getElementById('word-count-badge');
    const modalEl = document.getElementById('joker-modal');
    const jokerBtnEl = document.getElementById('joker-btn');

    // === INIT ===
    function initGame() {
        populateJokerModal();
        startRound();
    }

    function startRound() {
        timeRemaining = GAME_DURATION;
        currentInputSequence = [];
        foundWords = [];
        jokerState = { used: false, char: null };
        
        generateLetters();
        renderKeyboard();
        renderJoker();
        renderInput();
        renderFoundWords();
        updateTimerDisplay();
        
        if (timerInterval) clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timeRemaining--;
            updateTimerDisplay();
            if (timeRemaining <= 0) endRound();
        }, 1000);
    }

    function endRound() {
        clearInterval(timerInterval);
        alert(`üéâ Oyun Bitti!\n\nBulunan Kelime: ${foundWords.length}`);
        startRound();
    }

    function generateLetters() {
        letters = [];
        const usedChars = new Set();
        
        // 3 sesli harf
        for (let i = 0; i < 3; i++) {
            let char;
            do {
                char = VOWELS[Math.floor(Math.random() * VOWELS.length)];
            } while (usedChars.has(char));
            usedChars.add(char);
            letters.push({ char, selected: false });
        }
        
        // 5 sessiz harf
        for (let i = 0; i < 5; i++) {
            let char;
            do {
                char = CONSONANTS[Math.floor(Math.random() * CONSONANTS.length)];
            } while (usedChars.has(char));
            usedChars.add(char);
            letters.push({ char, selected: false });
        }
        
        // Karƒ±≈ütƒ±r
        letters.sort(() => Math.random() - 0.5);
    }

    function renderKeyboard() {
        for (let i = 0; i < LETTER_COUNT; i++) {
            const keyEl = document.getElementById(`key-${i}`);
            const letter = letters[i];
            
            keyEl.textContent = letter.char;
            keyEl.classList.toggle('selected', letter.selected);
        }
    }

    function renderJoker() {
        if (jokerState.used) {
            jokerBtnEl.classList.add('selected');
            jokerBtnEl.classList.remove('animate-bounce-subtle');
            jokerBtnEl.innerHTML = `<span class="text-xl font-bold">${jokerState.char}</span>`;
        } else {
            jokerBtnEl.classList.remove('selected');
            jokerBtnEl.classList.add('animate-bounce-subtle');
            jokerBtnEl.innerHTML = '<span class="material-symbols-outlined text-2xl">star</span>';
        }
    }

    function handleLetterClick(index) {
        const letter = letters[index];
        
        if (letter.selected) {
            removeFromInput(`letter-${index}`);
        } else {
            letter.selected = true;
            currentInputSequence.push({ 
                id: `letter-${index}`, 
                type: 'letter', 
                char: letter.char
            });
        }
        
        renderKeyboard();
        renderInput();
    }

    function handleJokerClick() {
        if (jokerState.used) {
            removeFromInput('joker');
        } else {
            openJokerModal();
        }
    }

    function removeFromInput(itemId) {
        const index = currentInputSequence.findIndex(s => s.id === itemId);
        if (index === -1) return;
        
        const item = currentInputSequence[index];
        currentInputSequence.splice(index, 1);
        
        if (item.type === 'letter') {
            const letterIndex = parseInt(item.id.split('-')[1]);
            letters[letterIndex].selected = false;
        } else if (item.type === 'joker') {
            jokerState = { used: false, char: null };
            renderJoker();
        }
        
        renderKeyboard();
        renderInput();
    }

    function renderInput() {
        inputContainerEl.innerHTML = '';
        
        if (currentInputSequence.length === 0) {
            inputContainerEl.innerHTML = '<span class="text-sm text-slate-400 w-full text-center italic font-medium">Tu≈ülara bas...</span>';
            return;
        }

        currentInputSequence.forEach((item, index) => {
            const box = document.createElement('div');
            let classes = "input-letter w-11 h-11 rounded-xl flex items-center justify-center text-lg font-extrabold shadow-lg border-2 cursor-pointer ";
            
            if (item.type === 'joker') {
                classes += "bg-gradient-to-b from-amber-400 to-amber-500 text-white border-amber-300";
            } else {
                classes += "bg-gradient-to-b from-sky-400 to-sky-500 text-white border-sky-300";
            }
            
            box.className = classes;
            box.innerText = item.char;
            box.style.animationDelay = `${index * 0.05}s`;
            box.classList.add('animate-pop');
            
            box.onclick = () => removeFromInput(item.id);
            inputContainerEl.appendChild(box);
        });
    }

    function removeLastChar() {
        if (currentInputSequence.length === 0) return;
        const lastItem = currentInputSequence[currentInputSequence.length - 1];
        removeFromInput(lastItem.id);
    }

    function clearGameInput() {
        letters.forEach(l => l.selected = false);
        jokerState = { used: false, char: null };
        currentInputSequence = [];
        
        renderKeyboard();
        renderJoker();
        renderInput();
    }

    function submitWord() {
        if (currentInputSequence.length < 2) {
            shakeInput();
            return;
        }
        
        const word = currentInputSequence.map(i => i.char).join('');
        
        if (foundWords.includes(word)) {
            shakeInput();
            clearGameInput();
            return;
        }

        foundWords.push(word);
        clearGameInput(); 
        renderFoundWords();
    }

    function shakeInput() {
        inputWrapperEl.classList.add('animate-shake');
        setTimeout(() => inputWrapperEl.classList.remove('animate-shake'), 300);
    }

    function renderFoundWords() {
        countBadgeEl.innerText = foundWords.length;
        foundListEl.innerHTML = '';
        
        if (foundWords.length === 0) {
            foundListEl.innerHTML = `
                <div class="w-full text-center mt-8 opacity-50">
                    <span class="material-symbols-outlined text-5xl text-slate-300">keyboard</span>
                    <p class="text-xs text-slate-400 mt-2 font-medium">Hen√ºz kelime bulunamadƒ±</p>
                </div>`;
            return;
        }
        
        foundWords.slice().reverse().forEach((word, i) => {
            const div = document.createElement('div');
            div.className = "px-4 py-2.5 bg-white rounded-xl text-sm font-bold shadow-md uppercase tracking-wide text-slate-700 border border-slate-200 animate-pop";
            div.style.animationDelay = `${i * 0.03}s`;
            div.innerText = word;
            foundListEl.appendChild(div);
        });
    }

    function updateTimerDisplay() {
        const m = Math.floor(timeRemaining / 60).toString().padStart(2, '0');
        const s = (timeRemaining % 60).toString().padStart(2, '0');
        timerEl.innerText = `${m}:${s}`;
        
        if (timeRemaining <= 10) {
            timerEl.classList.add('text-red-500');
            timerEl.classList.remove('text-primary');
        } else {
            timerEl.classList.remove('text-red-500');
            timerEl.classList.add('text-primary');
        }
    }

    function shuffleLetters() {
        if (currentInputSequence.length > 0) return;
        letters.sort(() => Math.random() - 0.5);
        renderKeyboard();
    }

    // === MODAL ===
    function populateJokerModal() {
        const grid = document.getElementById('alphabet-grid');
        grid.innerHTML = '';
        for (let char of FULL_ALPHABET) {
            const btn = document.createElement('button');
            btn.className = 'aspect-square bg-slate-50 rounded-lg font-bold text-slate-700 hover:bg-amber-500 hover:text-white transition-all text-sm border border-slate-200 shadow-sm active:scale-90';
            btn.innerText = char;
            btn.onclick = () => selectJokerChar(char);
            grid.appendChild(btn);
        }
    }

    function openJokerModal() { 
        modalEl.classList.remove('hidden'); 
    }

    function closeJokerModal() { 
        modalEl.classList.add('hidden'); 
    }

    function selectJokerChar(char) {
        jokerState = { used: true, char: char };
        currentInputSequence.push({ 
            id: 'joker', 
            type: 'joker', 
            char: char
        });
        
        renderJoker();
        renderInput();
        closeJokerModal();
    }

    // === START ===
    window.onload = initGame;
</script>
</body>
</html>